<div class="container_fluid">
  <div class="goal_show">
    <h4 class="goal_title_in_show"><%= @goal.title %></h4>

    <ul class="list-group">
      <li class="list-group-item">期間：<%= @goal.day_to_start %>〜<%= @goal.day_to_finish %></li>
      <li class="list-group-item">目的：<%= @goal.purpose %></li>
      <li class="list-group-item">達成すると？：<%= @goal.when_succeed %></li>
      <li class="list-group-item">達成しないと？：<%= @goal.when_fail %></li>
    </ul>

    <table class="table">
      <thead>
        <tr>
          <th>問題</th>
          <th>解決案</th>
          <th>タスク</th>
          <th>ステップ</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <% @goal.problems.each do |problem| %>
              <p><%= problem.title %></p>
            <% end %>
          </td>

          <td>
            <% @goal.problems.each do |problem| %>
              <% problem.solutions.each do |solution| %>
                <p><%= solution.title %></p>
              <% end %>
            <% end %>
          </td>

          <td>
            <% @goal.problems.each do |problem| %>
              <% problem.solutions.each do |solution| %>
                <% solution.tasks.each do |task| %>
                  <p><%= task.title %></p>
                <% end %>
              <% end %>
            <% end %>
          </td>

          <td>
            <% @goal.problems.each do |problem| %>
              <% problem.solutions.each do |solution| %>
                <% solution.tasks.each do |task| %>
                  <% task.steps.each do |step| %>
                    <p><%= step.title %></p>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>
          </td>
        </tr>
      </tbody>


    <ul class="list-group problems_list">
      <li class="list-group-item"><strong>未解決の問題</strong></li>
      <% @goal.problems.each do |problem| %>
        <% if problem.status == t('view.unsolved') %>
          <li class="list-group-item"><%= problem.title %></li>
        <% end %>
      <% end %>

      <li class="list-group-item"><strong>解決済みの問題</strong></li>
      <% @goal.problems.each do |problem| %>
        <% if problem.status == t('view.solved') %>
          <li class="list-group-item"><%= problem.title %></li>
        <% end %>
      <% end %><!--problem-->
    </ul>
  <%= link_to "一覧", goals_path, class: "btn btn-outline-secondary to_goal_index" %>
  </div>
</div>
